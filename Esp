-- AdminCommands.lua
-- Interface de comandos de admin para Roblox

local player = game.Players.LocalPlayer
local players = game:GetService("Players")

-- Função para criar a interface
local function createAdminGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AdminCommandGui"
    screenGui.Parent = player:WaitForChild("PlayerGui")
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 350, 0, 300)
    frame.Position = UDim2.new(0.5, -175, 0.5, -150)
    frame.BackgroundTransparency = 0.5 -- 50% transparência
    frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    frame.Parent = screenGui
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "Comandos Admin"
    title.TextColor3 = Color3.fromRGB(0, 0, 0)
    title.TextTransparency = 0.25 -- 75% visível
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 28
    title.Parent = frame
    
    local playerList = Instance.new("ScrollingFrame")
    playerList.Size = UDim2.new(1, -20, 0, 120)
    playerList.Position = UDim2.new(0, 10, 0, 50)
    playerList.BackgroundTransparency = 1
    playerList.CanvasSize = UDim2.new(0, 0, 0, 0)
    playerList.Parent = frame
    
    -- Botão para "Todos"
    local allButton = Instance.new("TextButton")
    allButton.Size = UDim2.new(1, -20, 0, 30)
    allButton.Position = UDim2.new(0, 10, 0, 180)
    allButton.Text = "Todos"
    allButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    allButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    allButton.TextTransparency = 0.25
    allButton.Font = Enum.Font.SourceSansBold
    allButton.TextSize = 24
    allButton.Parent = frame
    
    local commandBox = Instance.new("TextBox")
    commandBox.Size = UDim2.new(1, -20, 0, 30)
    commandBox.Position = UDim2.new(0, 10, 0, 220)
    commandBox.PlaceholderText = "Digite :kill, :explode, ;kill, ;explode"
    commandBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    commandBox.TextTransparency = 0.25
    commandBox.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    commandBox.BackgroundTransparency = 0.25
    commandBox.Font = Enum.Font.SourceSans
    commandBox.TextSize = 18
    commandBox.Parent = frame
    
    local okButton = Instance.new("TextButton")
    okButton.Size = UDim2.new(0.5, -15, 0, 30)
    okButton.Position = UDim2.new(0.5, 5, 0, 260)
    okButton.Text = "OK"
    okButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    okButton.TextColor3 = Color3.fromRGB(255, 0, 0)
    okButton.TextTransparency = 0.25
    okButton.Font = Enum.Font.SourceSansBold
    okButton.TextSize = 22
    okButton.Parent = frame

    -- Lista de jogadores
    local selectedPlayer = nil
    local playerButtons = {}

    local function refreshPlayers()
        for i, btn in ipairs(playerButtons) do
            btn:Destroy()
        end
        playerButtons = {}
        local y = 0
        for _, p in ipairs(players:GetPlayers()) do
            if p ~= player then
                local btn = Instance.new("TextButton")
                btn.Size = UDim2.new(1, 0, 0, 30)
                btn.Position = UDim2.new(0, 0, 0, y)
                btn.Text = p.Name
                btn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                btn.TextColor3 = Color3.fromRGB(0, 0, 0)
                btn.TextTransparency = 0.25
                btn.Font = Enum.Font.SourceSansBold
                btn.TextSize = 20
                btn.Parent = playerList
                btn.MouseButton1Click:Connect(function()
                    selectedPlayer = p
                    for _, b in ipairs(playerButtons) do
                        b.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                    end
                    btn.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                end)
                table.insert(playerButtons, btn)
                y = y + 35
            end
        end
        playerList.CanvasSize = UDim2.new(0, 0, 0, y)
    end

    refreshPlayers()
    players.PlayerAdded:Connect(refreshPlayers)
    players.PlayerRemoving:Connect(refreshPlayers)

    -- Função de execução de comando
    local function executeCommand(targets, command)
        for _, target in ipairs(targets) do
            if command == ":kill" or command == ";kill" then
                local char = target.Character
                if char and char:FindFirstChild("Humanoid") then
                    char.Humanoid.Health = 0
                end
            elseif command == ":explode" or command == ";explode" then
                local char = target.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    local explosion = Instance.new("Explosion")
                    explosion.Position = char.HumanoidRootPart.Position
                    explosion.BlastRadius = 10
                    explosion.Parent = workspace
                end
            end
        end
    end

    -- Botão OK para aplicar comando
    okButton.MouseButton1Click:Connect(function()
        local cmd = commandBox.Text:lower()
        if cmd == ":kill" or cmd == ";kill" or cmd == ":explode" or cmd == ";explode" then
            if selectedPlayer then
                executeCommand({selectedPlayer}, cmd)
            else
                print("Selecione um jogador!")
            end
        elseif cmd == ":kill todos" or cmd == ";kill todos" or cmd == ":explode todos" or cmd == ";explode todos" then
            local allPlayers = {}
            for _, p in ipairs(players:GetPlayers()) do
                if p ~= player then
                    table.insert(allPlayers, p)
                end
            end
            executeCommand(allPlayers, cmd:match("kill") and ":kill" or ":explode")
        else
            print("Comando inválido.")
        end
    end)

    -- Botão "Todos"
    allButton.MouseButton1Click:Connect(function()
        selectedPlayer = nil
        for _, b in ipairs(playerButtons) do
            b.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        end
    end)
end

-- Executa apenas se for admin (adicione sua lógica de verificação de admin aqui)
local function isAdmin()
    -- Exemplo: coloque seu nome
    local admins = { "SeuNomeAqui", "OutroAdmin" }
    for _, name in ipairs(admins) do
        if player.Name == name then
            return true
        end
    end
    return false
end

if isAdmin() then
    createAdminGui()
end
